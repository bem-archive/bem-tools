#!/usr/bin/env node

'use strict';

var updateNotifier = require('update-notifier'),
    notifier = updateNotifier({ packagePath: '../package.json' });

if (notifier.update) {
    notifier.notify();
}

// Do not limit stack trace
Error.stackTraceLimit = Infinity;

var insight = require('../lib/insight'),
    coa = require('../lib/coa');

if (!process.env.CI && insight.optOut === undefined) {
    insight.track('first-run');
    insight.askPermission(null, run);
} else {
    run();
}

function run() {
    coa.run();
}
